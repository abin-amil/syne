"use strict";function parse(e,t){var r;if((r=new RegExp("^"+regex.yyyy+regex.del+regex.mm+regex.del+regex.dd+"$").exec(e))&&n(+r[1],+r[2],+r[3]))return new Date(+r[1],+r[2]-1,+r[3]);if(t){if((r=new RegExp("^"+regex.dd+regex.del+regex.mm+regex.del+regex.yyyy+"$").exec(e))&&n(+r[3],+r[2],+r[1]))return new Date(+r[3],+r[2]-1,+r[1])}else if((r=new RegExp("^"+regex.mm+regex.del+regex.dd+regex.del+regex.yyyy+"$").exec(e))&&n(+r[3],+r[1],+r[2]))return new Date(+r[3],+r[1]-1,+r[2]);function n(e,t,r){return 2===t?r<29||!(r>29)&&(!(e%4)&&e%100||!(e%400)):r<=[31,28,31,30,31,30,31,31,30,31,30,31][t-1]}}function isValidYearRange(e){var t=e.getFullYear();return t>=1900&&t<2100}function isValidJsDate(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())}function cloneAsDate(e){return isValidJsDate(e)?new Date(e.getTime()):e&&e.isDateWrapper?new Date(e._baseDate.getTime()):void 0}var regex={yyyy:"(19\\d\\d|20\\d\\d)",mm:"([1-9]|0[1-9]|1[012])",dd:"([1-9]|0[1-9]|[12]\\d|3[01])",del:"[/-]"};function convertToDate(e,t){if(e){if(isValidJsDate(e))return new Date(e.getTime());if(e.isDateWrapper)return new Date(e._baseDate.getTime());if("string"==typeof e)return parse(e,t)}}function changeDate(e,t,r){if(regex$1.posOrNegNum.test(t)){var n=new Date(e.getTime());switch(r){case"y":n.setFullYear(n.getFullYear()+ +t);break;case"m":n.setMonth(n.getMonth()+ +t);break;case"d":n.setDate(n.getDate()+ +t)}if(isValidYearRange(n))return n}}function changeTime(e,t,r){var n=r?regex$1.upTo3digits:regex$1.posOrNegNum;for(var a in e){var i=e[a];if(i&&!n.test(i))return;e[a]=i?+i:0}var s=new Date(t.getTime());if(r){if(e[0]<24&&e[1]<60&&e[2]<60&&e[3]<1e3)return s.setHours(e[0],e[1],e[2],e[3]),s}else if(s.setHours(s.getHours()+e[0],s.getMinutes()+e[1],s.getSeconds()+e[2],s.getMilliseconds()+e[3]),isValidYearRange(s))return s}function compare(e,t,r,n){var a=cloneAsDate(t);if(a){var i=new Date(e.getTime());switch(n||(a.setHours(0,0,0,0),i.setHours(0,0,0,0)),r){case"=":return i.getTime()===a.getTime();case">":return i.getTime()>a.getTime();case"<":return i.getTime()<a.getTime();case">=":return i.getTime()>=a.getTime();case"<=":return i.getTime()<=a.getTime()}}}function timeSpanFrom(e,t){var r=cloneAsDate(t);if(r){var n={days:0,hours:0,minutes:0,seconds:0,ms:0},a=e.getTime()-r.getTime(),i=a>0?Math.floor:Math.ceil;return n.days=i(a/864e5),a-=1e3*n.days*60*60*24,n.hours=i(a/36e5),a-=1e3*n.hours*60*60,n.minutes=i(a/6e4),a-=1e3*n.minutes*60,n.seconds=i(a/1e3),n.ms=a-1e3*n.seconds,n}}var regex$1={upTo3digits:/^\d{1,3}$/,posOrNegNum:/^-?\d*$/};function format(e,t){if(!t||""===t)return e.toString();for(var r,n="";t.length>0;)n+=(r=parseNextSegment(t,e))[0],t=r[1];return n}function parseNextSegment(e,t){var r=findKeyOrLiteral(e,null,!0),n=e.substring(r.length);return[formatKey(r,t),n]}function findKeyOrLiteral(e,t,r){if(0===e.length)return"";var n=e[0];return t?t===n?n+findKeyOrLiteral(e.substring(1),t):"":charIsKey(n)?r?n+findKeyOrLiteral(e.substring(1),n):"":n+findKeyOrLiteral(e.substring(1))}function formatKey(e,t){var r=charIsKey(e[0]);return mapper[r]&&mapper[r][e]?mapper[r][e](t):e}function charIsKey(e){return constants.keys[constants.keys.indexOf(e)]}function padLeft(e,t){return String(t+e).slice(-t.length)}var constants={keys:["M","d","y","m","h","H","s","f","t"],MMM:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"],ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dddd:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},mapper={M:{M:function(e){return(e.getMonth()+1).toString()},MM:function(e){return padLeft(e.getMonth()+1,"00")},MMM:function(e){return constants.MMM[e.getMonth()]},MMMM:function(e){return constants.MMMM[e.getMonth()]}},d:{d:function(e){return e.getDate().toString()},dd:function(e){return padLeft(e.getDate(),"00")},ddd:function(e){return constants.ddd[e.getDay()]},dddd:function(e){return constants.dddd[e.getDay()]}},y:{yy:function(e){return e.getFullYear().toString().substring(2)},yyyy:function(e){return e.getFullYear().toString()}},h:{h:function(e){return this.getHours(e).toString()},hh:function(e){return padLeft(this.getHours(e),"00")},getHours:function(e){var t=e.getHours();return t>12?t-12:t}},H:{H:function(e){return e.getHours().toString()},HH:function(e){return padLeft(e.getHours(),"00")}},m:{mm:function(e){return padLeft(e.getMinutes(),"00")}},s:{ss:function(e){return padLeft(e.getSeconds(),"00")}},f:{fff:function(e){return padLeft(e.getMilliseconds(),"000")}},t:{tt:function(e){return e.getHours()<12?"AM":"PM"}}};function dateWrapper(e,t){var r=new dateWrapper.fn.init(e,t);return r._baseDate?r:void 0}dateWrapper.fn=dateWrapper.prototype={},dateWrapper.fn.init=function(e,t){return this._baseDate=convertToDate(e,t),this},dateWrapper.fn.setTime=function(e,t,r,n){return dateWrapper(changeTime([e,t,r,n],this._baseDate,!0))},dateWrapper.fn.addTime=function(e,t,r,n){return dateWrapper(changeTime([e,t,r,n],this._baseDate))},dateWrapper.fn.addYears=function(e){return dateWrapper(changeDate(this._baseDate,e,"y"))},dateWrapper.fn.addMonths=function(e){return dateWrapper(changeDate(this._baseDate,e,"m"))},dateWrapper.fn.addDays=function(e){return dateWrapper(changeDate(this._baseDate,e,"d"))},dateWrapper.fn.equals=function(e,t){return compare(this._baseDate,e,"=",t)},dateWrapper.fn.isAfter=function(e,t){return compare(this._baseDate,e,">",t)},dateWrapper.fn.isBefore=function(e,t){return compare(this._baseDate,e,"<",t)},dateWrapper.fn.isOnOrAfter=function(e,t){return compare(this._baseDate,e,">=",t)},dateWrapper.fn.isOnOrBefore=function(e,t){return compare(this._baseDate,e,"<=",t)},dateWrapper.fn.firstOfMonth=function(){return dateWrapper(new Date(this._baseDate.getFullYear(),this._baseDate.getMonth(),1))},dateWrapper.fn.lastOfMonth=function(){return dateWrapper(new Date(this._baseDate.getFullYear(),this._baseDate.getMonth()+1,0))},dateWrapper.fn.firstOfYear=function(){return dateWrapper(new Date(this._baseDate.getFullYear(),0,1))},dateWrapper.fn.lastOfYear=function(){return dateWrapper(new Date(this._baseDate.getFullYear(),11,31))},dateWrapper.fn.from=function(e){return timeSpanFrom(this._baseDate,e)},dateWrapper.fn.toDate=function(){return new Date(this._baseDate.getTime())},dateWrapper.fn.toString=function(e){return format(this._baseDate,e)},dateWrapper.fn.isDateWrapper=!0,dateWrapper.fn.init.prototype=dateWrapper.fn,module.exports=dateWrapper;
