!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).dateWrapper=t()}(this,function(){"use strict";function e(e){var t=e.getFullYear();return t>=1900&&t<2100}function t(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())}function n(e){return t(e)?new Date(e.getTime()):e&&e.isDateWrapper?new Date(e._baseDate.getTime()):void 0}var r={yyyy:"(19\\d\\d|20\\d\\d)",mm:"([1-9]|0[1-9]|1[012])",dd:"([1-9]|0[1-9]|[12]\\d|3[01])",del:"[/-]"};function u(e,n){if(e){if(t(e))return new Date(e.getTime());if(e.isDateWrapper)return new Date(e._baseDate.getTime());if("string"==typeof e)return function(e,t){var n;if((n=new RegExp("^"+r.yyyy+r.del+r.mm+r.del+r.dd+"$").exec(e))&&u(+n[1],+n[2],+n[3]))return new Date(+n[1],+n[2]-1,+n[3]);if(t){if((n=new RegExp("^"+r.dd+r.del+r.mm+r.del+r.yyyy+"$").exec(e))&&u(+n[3],+n[2],+n[1]))return new Date(+n[3],+n[2]-1,+n[1])}else if((n=new RegExp("^"+r.mm+r.del+r.dd+r.del+r.yyyy+"$").exec(e))&&u(+n[3],+n[1],+n[2]))return new Date(+n[3],+n[1]-1,+n[2]);function u(e,t,n){return 2===t?n<29||!(n>29)&&(!(e%4)&&e%100||!(e%400)):n<=[31,28,31,30,31,30,31,31,30,31,30,31][t-1]}}(e,n)}}function i(t,n,r){if(o.posOrNegNum.test(n)){var u=new Date(t.getTime());switch(r){case"y":u.setFullYear(u.getFullYear()+ +n);break;case"m":u.setMonth(u.getMonth()+ +n);break;case"d":u.setDate(u.getDate()+ +n)}if(e(u))return u}}function s(t,n,r){var u=r?o.upTo3digits:o.posOrNegNum;for(var i in t){var s=t[i];if(s&&!u.test(s))return;t[i]=s?+s:0}var a=new Date(n.getTime());if(r){if(t[0]<24&&t[1]<60&&t[2]<60&&t[3]<1e3)return a.setHours(t[0],t[1],t[2],t[3]),a}else if(a.setHours(a.getHours()+t[0],a.getMinutes()+t[1],a.getSeconds()+t[2],a.getMilliseconds()+t[3]),e(a))return a}function a(e,t,r,u){var i=n(t);if(i){var s=new Date(e.getTime());switch(u||(i.setHours(0,0,0,0),s.setHours(0,0,0,0)),r){case"=":return s.getTime()===i.getTime();case">":return s.getTime()>i.getTime();case"<":return s.getTime()<i.getTime();case">=":return s.getTime()>=i.getTime();case"<=":return s.getTime()<=i.getTime()}}}var o={upTo3digits:/^\d{1,3}$/,posOrNegNum:/^-?\d*$/};function f(e,t){var n=function e(t,n,r){if(0===t.length)return"";var u=t[0];return n?n===u?u+e(t.substring(1),n):"":d(u)?r?u+e(t.substring(1),u):"":u+e(t.substring(1))}(e,null,!0),r=e.substring(n.length);return[function(e,t){var n=d(e[0]);if(h[n]&&h[n][e])return h[n][e](t);return e}(n,t),r]}function d(e){return g.keys[g.keys.indexOf(e)]}function c(e,t){return String(t+e).slice(-t.length)}var g={keys:["M","d","y","m","h","H","s","f","t"],MMM:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"],ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dddd:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},h={M:{M:function(e){return(e.getMonth()+1).toString()},MM:function(e){return c(e.getMonth()+1,"00")},MMM:function(e){return g.MMM[e.getMonth()]},MMMM:function(e){return g.MMMM[e.getMonth()]}},d:{d:function(e){return e.getDate().toString()},dd:function(e){return c(e.getDate(),"00")},ddd:function(e){return g.ddd[e.getDay()]},dddd:function(e){return g.dddd[e.getDay()]}},y:{yy:function(e){return e.getFullYear().toString().substring(2)},yyyy:function(e){return e.getFullYear().toString()}},h:{h:function(e){return this.getHours(e).toString()},hh:function(e){return c(this.getHours(e),"00")},getHours:function(e){var t=e.getHours();return t>12?t-12:t}},H:{H:function(e){return e.getHours().toString()},HH:function(e){return c(e.getHours(),"00")}},m:{mm:function(e){return c(e.getMinutes(),"00")}},s:{ss:function(e){return c(e.getSeconds(),"00")}},f:{fff:function(e){return c(e.getMilliseconds(),"000")}},t:{tt:function(e){return e.getHours()<12?"AM":"PM"}}};function y(e,t){var n=new y.fn.init(e,t);return n._baseDate?n:void 0}return y.fn=y.prototype={},y.fn.init=function(e,t){return this._baseDate=u(e,t),this},y.fn.setTime=function(e,t,n,r){return y(s([e,t,n,r],this._baseDate,!0))},y.fn.addTime=function(e,t,n,r){return y(s([e,t,n,r],this._baseDate))},y.fn.addYears=function(e){return y(i(this._baseDate,e,"y"))},y.fn.addMonths=function(e){return y(i(this._baseDate,e,"m"))},y.fn.addDays=function(e){return y(i(this._baseDate,e,"d"))},y.fn.equals=function(e,t){return a(this._baseDate,e,"=",t)},y.fn.isAfter=function(e,t){return a(this._baseDate,e,">",t)},y.fn.isBefore=function(e,t){return a(this._baseDate,e,"<",t)},y.fn.isOnOrAfter=function(e,t){return a(this._baseDate,e,">=",t)},y.fn.isOnOrBefore=function(e,t){return a(this._baseDate,e,"<=",t)},y.fn.firstOfMonth=function(){return y(new Date(this._baseDate.getFullYear(),this._baseDate.getMonth(),1))},y.fn.lastOfMonth=function(){return y(new Date(this._baseDate.getFullYear(),this._baseDate.getMonth()+1,0))},y.fn.firstOfYear=function(){return y(new Date(this._baseDate.getFullYear(),0,1))},y.fn.lastOfYear=function(){return y(new Date(this._baseDate.getFullYear(),11,31))},y.fn.from=function(e){return function(e,t){var r=n(t);if(r){var u={days:0,hours:0,minutes:0,seconds:0,ms:0},i=e.getTime()-r.getTime(),s=i>0?Math.floor:Math.ceil;return u.days=s(i/864e5),i-=1e3*u.days*60*60*24,u.hours=s(i/36e5),i-=1e3*u.hours*60*60,u.minutes=s(i/6e4),i-=1e3*u.minutes*60,u.seconds=s(i/1e3),u.ms=i-1e3*u.seconds,u}}(this._baseDate,e)},y.fn.toDate=function(){return new Date(this._baseDate.getTime())},y.fn.toString=function(e){return function(e,t){if(!t||""===t)return e.toString();for(var n,r="";t.length>0;)r+=(n=f(t,e))[0],t=n[1];return r}(this._baseDate,e)},y.fn.isDateWrapper=!0,y.fn.init.prototype=y.fn,y});
